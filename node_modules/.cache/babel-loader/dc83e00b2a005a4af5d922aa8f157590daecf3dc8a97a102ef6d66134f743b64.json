{"ast":null,"code":"var _jsxFileName = \"/Users/nivetham/Documents/face identification in video/src/pages/Analysis/Analysis.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useCriminal } from '../../context/CriminalContext';\nimport UploadZone from '../../components/UploadZone/UploadZone';\nimport AnalysisPanel from '../../components/AnalysisPanel/AnalysisPanel';\nimport Results from '../../components/Results/Results';\nimport Timeline from '../../components/Timeline/Timeline';\nimport { motion } from 'framer-motion';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Analysis = () => {\n  _s();\n  var _results$mlStats, _results$mlStats2, _results$mlStats3;\n  const {\n    criminals,\n    setAnalysisResults\n  } = useCriminal();\n  const [selectedImage, setSelectedImage] = useState(null);\n  const [selectedVideo, setSelectedVideo] = useState(null);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [results, setResults] = useState(null);\n  const [backendStatus, setBackendStatus] = useState('unknown');\n  const testBackendConnection = async () => {\n    try {\n      setBackendStatus('checking');\n      const response = await fetch('http://localhost:5000/api/health');\n      const data = await response.json();\n      console.log('Backend connection:', data);\n      setBackendStatus('connected');\n      alert(`âœ… Backend is running!\\nPort: ${data.port}\\nStatus: ${data.status}`);\n    } catch (error) {\n      console.error('Backend connection failed:', error);\n      setBackendStatus('disconnected');\n      alert('âŒ Cannot connect to ML backend.\\n\\nPlease make sure:\\n1. Python server is running on port 5000\\n2. Backend dependencies are installed\\n3. No firewall blocking the connection');\n    }\n  };\n  const analyzeMedia = async () => {\n    if (!selectedImage || !selectedVideo) {\n      alert('Please upload both a reference face image and a video to analyze');\n      return;\n    }\n\n    // Validate file types\n    if (!selectedImage.type.startsWith('image/')) {\n      alert('Please upload a valid image file for the reference face');\n      return;\n    }\n    if (!selectedVideo.type.startsWith('video/')) {\n      alert('Please upload a valid video file for analysis');\n      return;\n    }\n    setIsAnalyzing(true);\n    setResults(null);\n    try {\n      console.log('Starting ML face classification analysis...');\n      console.log('Reference image:', selectedImage.name, selectedImage.size, 'bytes');\n      console.log('Video file:', selectedVideo.name, selectedVideo.size, 'bytes');\n\n      // Step 1: Upload reference image to Python backend for ML training\n      const imageFormData = new FormData();\n      imageFormData.append('image', selectedImage);\n      console.log('ðŸ“· Training ML classifier on reference face...');\n      const imageResponse = await fetch('http://localhost:5000/api/upload-reference', {\n        method: 'POST',\n        body: imageFormData\n      });\n      if (!imageResponse.ok) {\n        throw new Error(`HTTP error! status: ${imageResponse.status}`);\n      }\n      const imageResult = await imageResponse.json();\n      console.log('ML training result:', imageResult);\n      if (!imageResult.success) {\n        throw new Error(imageResult.error || 'Failed to train ML classifier on reference face');\n      }\n\n      // Step 2: Analyze video with ML classification\n      const videoFormData = new FormData();\n      videoFormData.append('video', selectedVideo);\n      console.log('ðŸŽ¥ Analyzing video with ML face classification...');\n      const videoResponse = await fetch('http://localhost:5000/api/analyze-video', {\n        method: 'POST',\n        body: videoFormData\n      });\n      if (!videoResponse.ok) {\n        throw new Error(`HTTP error! status: ${videoResponse.status}`);\n      }\n      const videoResult = await videoResponse.json();\n      console.log('ML classification results:', videoResult);\n      if (videoResult.error) {\n        throw new Error(videoResult.error);\n      }\n\n      // Format results for frontend display\n      const formattedResults = {\n        matchFound: videoResult.matchFound,\n        criminal: {\n          name: \"Target Person\",\n          crime: \"Reference Face Match\",\n          severity: \"High\",\n          image: URL.createObjectURL(selectedImage)\n        },\n        timestamps: videoResult.timestamps || [],\n        analysisTime: videoResult.analysisTime || 'ML Classification Complete',\n        totalFrames: videoResult.totalFrames || 0,\n        // ML-specific statistics\n        mlStats: {\n          totalFacesDetected: videoResult.totalFacesDetected || 0,\n          targetDetections: videoResult.targetDetections || 0,\n          confidenceThreshold: videoResult.confidenceThreshold || 60,\n          analysisMethod: \"SVM Machine Learning Classification\"\n        }\n      };\n      setResults(formattedResults);\n      setAnalysisResults(formattedResults);\n      console.log('âœ… ML analysis completed successfully!');\n      console.log('Target person found:', formattedResults.matchFound);\n      console.log('Detection count:', formattedResults.timestamps.length);\n    } catch (error) {\n      console.error('âŒ Analysis error:', error);\n      if (error.message.includes('Failed to fetch')) {\n        alert(`ðŸš¨ Connection Error: Cannot reach ML backend\\n\\nPlease ensure:\\n1. Python server is running on port 5000\\n2. Run \"python3 app.py\" in backend folder\\n3. Check firewall settings\\n\\nError: ${error.message}`);\n      } else if (error.message.includes('face')) {\n        alert(`ðŸ¤– ML Analysis Error: ${error.message}\\n\\nPlease upload a clear face image where the face is visible and well-lit.`);\n      } else if (error.message.includes('video')) {\n        alert(`ðŸŽ¥ Video Error: ${error.message}\\n\\nPlease check the video file is supported (MP4, MOV, AVI) and not corrupted.`);\n      } else {\n        alert(`âŒ Analysis Failed: ${error.message}`);\n      }\n    } finally {\n      setIsAnalyzing(false);\n    }\n  };\n  const getBackendStatusColor = () => {\n    switch (backendStatus) {\n      case 'connected':\n        return 'bg-green-500';\n      case 'disconnected':\n        return 'bg-red-500';\n      case 'checking':\n        return 'bg-yellow-500';\n      default:\n        return 'bg-gray-500';\n    }\n  };\n  const getBackendStatusText = () => {\n    switch (backendStatus) {\n      case 'connected':\n        return 'ML Backend Connected';\n      case 'disconnected':\n        return 'ML Backend Offline';\n      case 'checking':\n        return 'Checking Connection...';\n      default:\n        return 'Check ML Backend';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen p-6\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0,\n          y: 30\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        className: \"text-center mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-4xl font-bold text-white mb-4\",\n          children: \"ML Face Classification\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white/80 mb-4 text-lg\",\n          children: \"Powered by SVM Machine Learning & Face Recognition\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center items-center gap-4 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-3 h-3 rounded-full ${getBackendStatusColor()} animate-pulse`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: testBackendConnection,\n            className: \"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: getBackendStatusText()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-4xl mx-auto mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-sm rounded-xl p-4 text-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-lg font-semibold\",\n              children: \"1. Upload Reference\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-white/80\",\n              children: \"Clear face image for ML training\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-sm rounded-xl p-4 text-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-lg font-semibold\",\n              children: \"2. Upload Video\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-white/80\",\n              children: \"Video to search for the person\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-sm rounded-xl p-4 text-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-lg font-semibold\",\n              children: \"3. ML Analysis\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-white/80\",\n              children: \"SVM classifier identifies matches\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(UploadZone, {\n            type: \"image\",\n            onFileUpload: setSelectedImage,\n            selectedFile: selectedImage,\n            onClear: () => setSelectedImage(null)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(UploadZone, {\n            type: \"video\",\n            onFileUpload: setSelectedVideo,\n            selectedFile: selectedVideo,\n            onClear: () => setSelectedVideo(null)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), (selectedImage || selectedVideo) && /*#__PURE__*/_jsxDEV(motion.div, {\n            initial: {\n              opacity: 0,\n              y: 10\n            },\n            animate: {\n              opacity: 1,\n              y: 0\n            },\n            className: \"card p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-gray-800 mb-2\",\n              children: \"Ready for ML Analysis\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2 text-sm\",\n              children: [selectedImage && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Reference Face:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-green-600 font-medium\",\n                  children: \"\\u2713 Ready\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 21\n              }, this), selectedVideo && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: \"Analysis Video:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-green-600 font-medium\",\n                  children: \"\\u2713 Ready\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 21\n              }, this), selectedImage && selectedVideo && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pt-2 border-t border-gray-200\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-blue-600 font-medium\",\n                  children: \"\\u2705 Both files ready for ML classification\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AnalysisPanel, {\n          isAnalyzing: isAnalyzing,\n          onAnalyze: analyzeMedia,\n          results: results,\n          hasFiles: selectedImage && selectedVideo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), results && /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          opacity: 0,\n          y: 20\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-4 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card p-4 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-blue-600\",\n              children: ((_results$mlStats = results.mlStats) === null || _results$mlStats === void 0 ? void 0 : _results$mlStats.totalFacesDetected) || 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Total Faces Detected\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card p-4 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-green-600\",\n              children: ((_results$mlStats2 = results.mlStats) === null || _results$mlStats2 === void 0 ? void 0 : _results$mlStats2.targetDetections) || 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Target Matches\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card p-4 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-purple-600\",\n              children: results.timestamps.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Detection Events\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card p-4 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-orange-600\",\n              children: [((_results$mlStats3 = results.mlStats) === null || _results$mlStats3 === void 0 ? void 0 : _results$mlStats3.confidenceThreshold) || 60, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600\",\n              children: \"ML Confidence Threshold\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 lg:grid-cols-2 gap-8\",\n          children: [/*#__PURE__*/_jsxDEV(Results, {\n            results: results\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Timeline, {\n            events: results.timestamps\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold text-gray-800 mb-4\",\n            children: \"ML Classification Method\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-gray-700 mb-2\",\n                children: \"Algorithm Used:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"space-y-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"\\u2022 Support Vector Machine (SVM) Classifier\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"\\u2022 Face Encoding with Deep Learning\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"\\u2022 Probability-based Confidence Scoring\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"\\u2022 Threshold-based Decision Making\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold text-gray-700 mb-2\",\n                children: \"Process:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"space-y-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"1. Train ML model on reference face\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"2. Extract face encodings from video frames\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"3. Classify each face using SVM\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 314,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: \"4. Filter results by confidence threshold\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 5\n  }, this);\n};\n_s(Analysis, \"bAE4QOubuTe8woPsa5DSqz2KXcM=\", false, function () {\n  return [useCriminal];\n});\n_c = Analysis;\nexport default Analysis;\nvar _c;\n$RefreshReg$(_c, \"Analysis\");","map":{"version":3,"names":["React","useState","useCriminal","UploadZone","AnalysisPanel","Results","Timeline","motion","jsxDEV","_jsxDEV","Analysis","_s","_results$mlStats","_results$mlStats2","_results$mlStats3","criminals","setAnalysisResults","selectedImage","setSelectedImage","selectedVideo","setSelectedVideo","isAnalyzing","setIsAnalyzing","results","setResults","backendStatus","setBackendStatus","testBackendConnection","response","fetch","data","json","console","log","alert","port","status","error","analyzeMedia","type","startsWith","name","size","imageFormData","FormData","append","imageResponse","method","body","ok","Error","imageResult","success","videoFormData","videoResponse","videoResult","formattedResults","matchFound","criminal","crime","severity","image","URL","createObjectURL","timestamps","analysisTime","totalFrames","mlStats","totalFacesDetected","targetDetections","confidenceThreshold","analysisMethod","length","message","includes","getBackendStatusColor","getBackendStatusText","className","children","div","initial","opacity","y","animate","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onFileUpload","selectedFile","onClear","onAnalyze","hasFiles","events","_c","$RefreshReg$"],"sources":["/Users/nivetham/Documents/face identification in video/src/pages/Analysis/Analysis.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useCriminal } from '../../context/CriminalContext';\nimport UploadZone from '../../components/UploadZone/UploadZone';\nimport AnalysisPanel from '../../components/AnalysisPanel/AnalysisPanel';\nimport Results from '../../components/Results/Results';\nimport Timeline from '../../components/Timeline/Timeline';\nimport { motion } from 'framer-motion';\n\nconst Analysis = () => {\n  const { criminals, setAnalysisResults } = useCriminal();\n  const [selectedImage, setSelectedImage] = useState(null);\n  const [selectedVideo, setSelectedVideo] = useState(null);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [results, setResults] = useState(null);\n  const [backendStatus, setBackendStatus] = useState('unknown');\n\n  const testBackendConnection = async () => {\n    try {\n      setBackendStatus('checking');\n      const response = await fetch('http://localhost:5000/api/health');\n      const data = await response.json();\n      console.log('Backend connection:', data);\n      setBackendStatus('connected');\n      alert(`âœ… Backend is running!\\nPort: ${data.port}\\nStatus: ${data.status}`);\n    } catch (error) {\n      console.error('Backend connection failed:', error);\n      setBackendStatus('disconnected');\n      alert('âŒ Cannot connect to ML backend.\\n\\nPlease make sure:\\n1. Python server is running on port 5000\\n2. Backend dependencies are installed\\n3. No firewall blocking the connection');\n    }\n  };\n\n  const analyzeMedia = async () => {\n    if (!selectedImage || !selectedVideo) {\n      alert('Please upload both a reference face image and a video to analyze');\n      return;\n    }\n\n    // Validate file types\n    if (!selectedImage.type.startsWith('image/')) {\n      alert('Please upload a valid image file for the reference face');\n      return;\n    }\n\n    if (!selectedVideo.type.startsWith('video/')) {\n      alert('Please upload a valid video file for analysis');\n      return;\n    }\n\n    setIsAnalyzing(true);\n    setResults(null);\n    \n    try {\n      console.log('Starting ML face classification analysis...');\n      console.log('Reference image:', selectedImage.name, selectedImage.size, 'bytes');\n      console.log('Video file:', selectedVideo.name, selectedVideo.size, 'bytes');\n\n      // Step 1: Upload reference image to Python backend for ML training\n      const imageFormData = new FormData();\n      imageFormData.append('image', selectedImage);\n      \n      console.log('ðŸ“· Training ML classifier on reference face...');\n      const imageResponse = await fetch('http://localhost:5000/api/upload-reference', {\n        method: 'POST',\n        body: imageFormData,\n      });\n      \n      if (!imageResponse.ok) {\n        throw new Error(`HTTP error! status: ${imageResponse.status}`);\n      }\n\n      const imageResult = await imageResponse.json();\n      console.log('ML training result:', imageResult);\n      \n      if (!imageResult.success) {\n        throw new Error(imageResult.error || 'Failed to train ML classifier on reference face');\n      }\n\n      // Step 2: Analyze video with ML classification\n      const videoFormData = new FormData();\n      videoFormData.append('video', selectedVideo);\n      \n      console.log('ðŸŽ¥ Analyzing video with ML face classification...');\n      const videoResponse = await fetch('http://localhost:5000/api/analyze-video', {\n        method: 'POST',\n        body: videoFormData,\n      });\n      \n      if (!videoResponse.ok) {\n        throw new Error(`HTTP error! status: ${videoResponse.status}`);\n      }\n\n      const videoResult = await videoResponse.json();\n      console.log('ML classification results:', videoResult);\n      \n      if (videoResult.error) {\n        throw new Error(videoResult.error);\n      }\n\n      // Format results for frontend display\n      const formattedResults = {\n        matchFound: videoResult.matchFound,\n        criminal: {\n          name: \"Target Person\",\n          crime: \"Reference Face Match\",\n          severity: \"High\",\n          image: URL.createObjectURL(selectedImage)\n        },\n        timestamps: videoResult.timestamps || [],\n        analysisTime: videoResult.analysisTime || 'ML Classification Complete',\n        totalFrames: videoResult.totalFrames || 0,\n        // ML-specific statistics\n        mlStats: {\n          totalFacesDetected: videoResult.totalFacesDetected || 0,\n          targetDetections: videoResult.targetDetections || 0,\n          confidenceThreshold: videoResult.confidenceThreshold || 60,\n          analysisMethod: \"SVM Machine Learning Classification\"\n        }\n      };\n      \n      setResults(formattedResults);\n      setAnalysisResults(formattedResults);\n      \n      console.log('âœ… ML analysis completed successfully!');\n      console.log('Target person found:', formattedResults.matchFound);\n      console.log('Detection count:', formattedResults.timestamps.length);\n      \n    } catch (error) {\n      console.error('âŒ Analysis error:', error);\n      \n      if (error.message.includes('Failed to fetch')) {\n        alert(`ðŸš¨ Connection Error: Cannot reach ML backend\\n\\nPlease ensure:\\n1. Python server is running on port 5000\\n2. Run \"python3 app.py\" in backend folder\\n3. Check firewall settings\\n\\nError: ${error.message}`);\n      } else if (error.message.includes('face')) {\n        alert(`ðŸ¤– ML Analysis Error: ${error.message}\\n\\nPlease upload a clear face image where the face is visible and well-lit.`);\n      } else if (error.message.includes('video')) {\n        alert(`ðŸŽ¥ Video Error: ${error.message}\\n\\nPlease check the video file is supported (MP4, MOV, AVI) and not corrupted.`);\n      } else {\n        alert(`âŒ Analysis Failed: ${error.message}`);\n      }\n    } finally {\n      setIsAnalyzing(false);\n    }\n  };\n\n  const getBackendStatusColor = () => {\n    switch (backendStatus) {\n      case 'connected': return 'bg-green-500';\n      case 'disconnected': return 'bg-red-500';\n      case 'checking': return 'bg-yellow-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  const getBackendStatusText = () => {\n    switch (backendStatus) {\n      case 'connected': return 'ML Backend Connected';\n      case 'disconnected': return 'ML Backend Offline';\n      case 'checking': return 'Checking Connection...';\n      default: return 'Check ML Backend';\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen p-6\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header Section */}\n        <motion.div\n          initial={{ opacity: 0, y: 30 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"text-center mb-8\"\n        >\n          <h1 className=\"text-4xl font-bold text-white mb-4\">ML Face Classification</h1>\n          <p className=\"text-white/80 mb-4 text-lg\">\n            Powered by SVM Machine Learning & Face Recognition\n          </p>\n          \n          {/* Backend Status */}\n          <div className=\"flex justify-center items-center gap-4 mb-4\">\n            <div className={`w-3 h-3 rounded-full ${getBackendStatusColor()} animate-pulse`}></div>\n            <button \n              onClick={testBackendConnection}\n              className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2\"\n            >\n              <span>{getBackendStatusText()}</span>\n            </button>\n          </div>\n\n          {/* ML Info Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-4xl mx-auto mb-6\">\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-4 text-white\">\n              <div className=\"text-lg font-semibold\">1. Upload Reference</div>\n              <div className=\"text-sm text-white/80\">Clear face image for ML training</div>\n            </div>\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-4 text-white\">\n              <div className=\"text-lg font-semibold\">2. Upload Video</div>\n              <div className=\"text-sm text-white/80\">Video to search for the person</div>\n            </div>\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-4 text-white\">\n              <div className=\"text-lg font-semibold\">3. ML Analysis</div>\n              <div className=\"text-sm text-white/80\">SVM classifier identifies matches</div>\n            </div>\n          </div>\n        </motion.div>\n\n        {/* Main Analysis Area */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\">\n          {/* Upload Section */}\n          <div className=\"space-y-6\">\n            <UploadZone\n              type=\"image\"\n              onFileUpload={setSelectedImage}\n              selectedFile={selectedImage}\n              onClear={() => setSelectedImage(null)}\n            />\n            <UploadZone\n              type=\"video\"\n              onFileUpload={setSelectedVideo}\n              selectedFile={selectedVideo}\n              onClear={() => setSelectedVideo(null)}\n            />\n\n            {/* Upload Status */}\n            {(selectedImage || selectedVideo) && (\n              <motion.div\n                initial={{ opacity: 0, y: 10 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"card p-4\"\n              >\n                <h4 className=\"font-semibold text-gray-800 mb-2\">Ready for ML Analysis</h4>\n                <div className=\"space-y-2 text-sm\">\n                  {selectedImage && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Reference Face:</span>\n                      <span className=\"text-green-600 font-medium\">âœ“ Ready</span>\n                    </div>\n                  )}\n                  {selectedVideo && (\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-600\">Analysis Video:</span>\n                      <span className=\"text-green-600 font-medium\">âœ“ Ready</span>\n                    </div>\n                  )}\n                  {selectedImage && selectedVideo && (\n                    <div className=\"pt-2 border-t border-gray-200\">\n                      <div className=\"text-blue-600 font-medium\">\n                        âœ… Both files ready for ML classification\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </motion.div>\n            )}\n          </div>\n\n          {/* Analysis Panel */}\n          <AnalysisPanel\n            isAnalyzing={isAnalyzing}\n            onAnalyze={analyzeMedia}\n            results={results}\n            hasFiles={selectedImage && selectedVideo}\n          />\n        </div>\n\n        {/* Results Section */}\n        {results && (\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"space-y-6\"\n          >\n            {/* ML Statistics */}\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n              <div className=\"card p-4 text-center\">\n                <div className=\"text-2xl font-bold text-blue-600\">{results.mlStats?.totalFacesDetected || 0}</div>\n                <div className=\"text-sm text-gray-600\">Total Faces Detected</div>\n              </div>\n              <div className=\"card p-4 text-center\">\n                <div className=\"text-2xl font-bold text-green-600\">{results.mlStats?.targetDetections || 0}</div>\n                <div className=\"text-sm text-gray-600\">Target Matches</div>\n              </div>\n              <div className=\"card p-4 text-center\">\n                <div className=\"text-2xl font-bold text-purple-600\">{results.timestamps.length}</div>\n                <div className=\"text-sm text-gray-600\">Detection Events</div>\n              </div>\n              <div className=\"card p-4 text-center\">\n                <div className=\"text-2xl font-bold text-orange-600\">{results.mlStats?.confidenceThreshold || 60}%</div>\n                <div className=\"text-sm text-gray-600\">ML Confidence Threshold</div>\n              </div>\n            </div>\n\n            {/* Main Results */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n              <Results results={results} />\n              <Timeline events={results.timestamps} />\n            </div>\n\n            {/* ML Method Info */}\n            <div className=\"card p-6\">\n              <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">ML Classification Method</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600\">\n                <div>\n                  <h4 className=\"font-semibold text-gray-700 mb-2\">Algorithm Used:</h4>\n                  <ul className=\"space-y-1\">\n                    <li>â€¢ Support Vector Machine (SVM) Classifier</li>\n                    <li>â€¢ Face Encoding with Deep Learning</li>\n                    <li>â€¢ Probability-based Confidence Scoring</li>\n                    <li>â€¢ Threshold-based Decision Making</li>\n                  </ul>\n                </div>\n                <div>\n                  <h4 className=\"font-semibold text-gray-700 mb-2\">Process:</h4>\n                  <ul className=\"space-y-1\">\n                    <li>1. Train ML model on reference face</li>\n                    <li>2. Extract face encodings from video frames</li>\n                    <li>3. Classify each face using SVM</li>\n                    <li>4. Filter results by confidence threshold</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Analysis;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}